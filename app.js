/* MEGA DENT v3 — Robust TreeWalker Translation + Booking */
const WA='77715249535',TG='https://t.me/MegaDentBot';
let curL=localStorage.getItem('ml')||'ru',origNodes=[];

/* ═══ FULL DICTIONARY ═══ */
const D={
// Nav
'Главная':'Басты бет','Услуги':'Қызметтер','О клинике':'Клиника туралы','Врачи':'Дәрігерлер','Отзывы':'Пікірлер','Контакты':'Байланыс','Записаться':'Жазылу','О нас':'Біз туралы','Клиника':'Клиника','Гигиена':'Гигиена','WhatsApp':'WhatsApp',
// Hero index
'Семейная стоматология':'Отбасылық стоматология','Забота о вашей':'Сіздің күлкіңізге','улыбке':'қамқорлық',
// NBSP version
'— в\u00a0наших руках':'— біздің қолымызда',
// Stats
'лет опыта':'жыл тәжірибе','довольных пациентов':'риза пациент','специалистов':'маман',
'Безболезненно':'Ауырсызданусыз','Современная анестезия':'Заманауи анестезия',
'Фото клиники':'Клиника фотосы','Фото интерьера клиники':'Клиника интерьерінің фотосы',
'лет заботы':'жыл қамқорлық','о пациентах':'пациенттерге',
// Sections
'Наши услуги':'Біздің қызметтер','Полный спектр':'Толық спектр','стоматологических услуг':'стоматологиялық қызметтер',
'Лечение зубов':'Тіс емдеу',
'От простого кариеса до сложных случаев пульпита. Безболезненно и с гарантией качества.':'Қарапайым кариестен пульпиттің күрделі жағдайларына дейін. Ауырсызданусыз және сапа кепілдігімен.',
'Детская стоматология':'Балалар стоматологиясы',
'Бережное лечение для маленьких пациентов с учётом возрастных особенностей.':'Жас ерекшеліктерін ескере отырып, кіші пациенттерді ұқыпты емдеу.',
'Имплантация':'Имплантация',
'Установка имплантов с использованием современных технологий и материалов мирового уровня.':'Заманауи технологиялар мен әлемдік деңгейдегі материалдарды пайдалана отырып имплант орнату.',
'Ортодонтия':'Ортодонтия',
'Исправление прикуса у детей и взрослых: брекеты, элайнеры и современные техники.':'Балалар мен ересектерде тістеуді түзету: брекеттер, элайнерлер және заманауи техникалар.',
'Профгигиена':'Кәсіби гигиена',
'Профессиональная чистка, отбеливание и укрепление эмали для здоровой улыбки.':'Сау күлкі үшін кәсіби тазалау, ағарту және эмальды нығайту.',
'Протезирование':'Протездеу',
'Коронки, виниры, мосты. Восстановление красивой и функциональной улыбки.':'Тәждер, винирлер, көпірлер. Әдемі және функционалды күлкіні қалпына келтіру.',
// About preview index
'Почему выбирают':'Неліктен таңдайды','Mega Dent?':'Mega Dent?',
'Мы создали пространство, где каждый член семьи получает качественную стоматологическую помощь в комфортной обстановке.':'Біз отбасының әрбір мүшесі ыңғайлы жағдайда сапалы стоматологиялық көмек алатын кеңістік жасадық.',
'Современное оборудование':'Заманауи жабдық',
'Работаем на новейшем оборудовании европейских и корейских производителей':'Еуропалық және кореялық өндірушілердің ең жаңа жабдықтарында жұмыс істейміз',
'Опытная команда':'Тәжірибелі команда','8 специалистов с опытом работы от 5 до 15 лет':'5-тен 15 жылға дейін тәжірибесі бар 8 маман',
'Комфорт и безопасность':'Жайлылық пен қауіпсіздік','Стерильность на уровне операционных, уютная атмосфера':'Операциялық деңгейдегі стерильділік, жайлы атмосфера',
'Прозрачные цены':'Ашық бағалар','Рассрочка через Kaspi, приём страховок и ЕНПФ':'Kaspi арқылы бөліп төлеу, сақтандыру және БЖЗҚ қабылдау',
'Подробнее о клинике':'Клиника туралы толығырақ','Подробнее':'Толығырақ','Позвонить':'Қоңырау шалу',
// CTA
'Запишитесь на бесплатную':'Тегін кеңесге','консультацию':'жазылыңыз',
'Приходите на осмотр и получите персональный план лечения. Без скрытых платежей — только честная стоматология.':'Тексеруге келіңіз және жеке емдеу жоспарын алыңыз. Жасырын төлемдерсіз — тек адал стоматология.',
// Footer
'Семейная стоматология для детей и взрослых. Забота о вашей улыбке — наша главная миссия.':'Балалар мен ересектерге арналған отбасылық стоматология. Сіздің күлкіңізге қамқорлық — біздің басты миссиямыз.',
'Семейная стоматология для детей и взрослых.':'Балалар мен ересектерге арналған отбасылық стоматология.',
'© 2026 Mega Dent. Все права защищены.':'© 2026 Mega Dent. Барлық құқықтар қорғалған.',
'© 2026 Mega Dent.':'© 2026 Mega Dent.','Сайт-пример дизайна':'Дизайн үлгісі',
'Семейная стоматология в Алматы':'Алматыдағы отбасылық стоматология',
'г. Алматы,':'Алматы қ.,','ул. Жандосова 60А':'Жандосов к-сі 60А',
// SERVICES page
'От профилактики до сложных хирургических вмешательств — всё в одной клинике для всей семьи. Современные методики и материалы мирового уровня.':'Алдын алудан күрделі хирургиялық араласуларға дейін — бүкіл отбасы үшін бір клиникада. Әлемдік деңгейдегі заманауи әдістемелер мен материалдар.',
'От профилактики до сложных хирургических вмешательств — всё в одной клинике для всей семьи':'Алдын алудан күрделі хирургиялық араласуларға дейін — бүкіл отбасы үшін бір клиникада',
'Мы лечим все виды кариеса, пульпит, периодонтит и другие заболевания зубов. Используем микроскоп для точной диагностики и работы с корневыми каналами. Современная анестезия делает процесс полностью безболезненным.':'Біз кариестің барлық түрлерін, пульпитті, периодонтитті және тістің басқа ауруларын емдейміз. Дәл диагностика және тамыр өзектерімен жұмыс істеу үшін микроскоп қолданамыз. Заманауи анестезия процесті толық ауырсызданусыз етеді.',
'Лечение кариеса любой сложности':'Кез келген күрделіліктегі кариесті емдеу','Эндодонтическое лечение каналов':'Өзектерді эндодонтиялық емдеу','Реставрация зубов фотополимерами':'Тістерді фотополимерлермен қалпына келтіру','Лечение под микроскопом':'Микроскоппен емдеу',
'Мы создали дружелюбную атмосферу для маленьких пациентов. Наши врачи умеют находить подход к каждому ребёнку, превращая визит в увлекательное приключение. Лечим молочные и постоянные зубы бережно и без страха.':'Біз кішкентай пациенттер үшін достық атмосфера жасадық. Біздің дәрігерлер әрбір балаға тәсіл тауып, стоматологқа баруды қызықты оқиғаға айналдырады. Сүт және тұрақты тістерді ұқыпты және қорқынышсыз емдейміз.',
'Лечение молочных зубов':'Сүт тістерін емдеу','Герметизация фиссур':'Фиссураларды герметикалау','Фторирование и укрепление эмали':'Фторлау және эмальды нығайту','Адаптация ребёнка к лечению':'Баланы емдеуге бейімдеу',
'Восстановление утраченных зубов с помощью дентальных имплантов — надёжный и долговечный метод. Мы используем импланты ведущих мировых производителей и проводим операции с минимальной травматичностью.':'Дентальды имплантаттардың көмегімен жоғалған тістерді қалпына келтіру — сенімді және ұзақ мерзімді әдіс. Әлемнің жетекші өндірушілерінің имплантаттарын қолданамыз.',
'Одноэтапная и двухэтапная имплантация':'Бір кезеңді және екі кезеңді имплантация','Костная пластика и синус-лифтинг':'Сүйек пластикасы және синус-лифтинг','Импланты Straumann, Osstem, Dentium':'Straumann, Osstem, Dentium имплантаттары','Гарантия на имплантацию':'Имплантацияға кепілдік',
'Красивая улыбка и правильный прикус для детей и взрослых. Мы подбираем оптимальный вариант лечения: от классических брекетов до невидимых элайнеров. Составляем индивидуальный план для каждого пациента.':'Балалар мен ересектерге әдемі күлкі және дұрыс тістеу. Классикалық брекеттерден көрінбейтін элайнерлерге дейін оңтайлы нұсқаны таңдаймыз.',
'Металлические и керамические брекеты':'Металл және керамикалық брекеттер','Прозрачные элайнеры':'Мөлдір элайнерлер','Детская ортодонтия (пластинки, трейнеры)':'Балалар ортодонтиясы (пластинкалар, трейнерлер)','3D-планирование результата':'3D-нәтижені жоспарлау',
'Профессиональная гигиена':'Кәсіби гигиена',
'Регулярная профессиональная чистка — основа здоровья зубов и дёсен. Мы удаляем зубной камень и налёт, полируем эмаль и проводим реминерализацию. Рекомендуем посещать гигиениста каждые 6 месяцев.':'Тұрақты кәсіби тазалау — тіс пен қызыл иектің денсаулығының негізі. Тіс тасы мен қабатын алып тастаймыз, эмальды жылтыратамыз. Әр 6 айда гигиенистке баруды ұсынамыз.',
'Ультразвуковая чистка':'Ультрадыбыстық тазалау','Air-Flow — удаление пигментного налёта':'Air-Flow — пигменттік қабатты алу','Профессиональное отбеливание':'Кәсіби ағарту','Фторирование и реминерализация':'Фторлау және реминерализация',
'Восстановление формы и функции зубов с помощью современных протезов. Индивидуальное изготовление коронок, виниров и мостовидных конструкций из высококачественных материалов.':'Заманауи протездердің көмегімен тістердің пішіні мен қызметін қалпына келтіру. Жоғары сапалы материалдардан тәждер, винирлер және көпір конструкцияларды жеке дайындау.',
'Циркониевые и керамические коронки':'Цирконий және керамикалық тәждер','Виниры и люминиры':'Винирлер және люминирлер','Мостовидные протезы':'Көпір протездер','Съёмное протезирование':'Алмалы протездеу',
'Оплата':'Төлем','Удобные условия':'Ыңғайлы шарттар','оплаты':'төлем',
'Гибкие варианты оплаты, чтобы качественная стоматология была доступна каждой семье':'Сапалы стоматология әрбір отбасына қолжетімді болуы үшін икемді төлем нұсқалары',
'Бесплатная консультация':'Тегін кеңес','Первичный осмотр и план лечения — бесплатно':'Алғашқы тексеру және емдеу жоспары — тегін',
'Рассрочка Kaspi':'Kaspi бөліп төлеу','Рассрочка на 12 и 24 месяца без переплат':'12 және 24 айға артық төлемсіз бөліп төлеу',
'Страховка и ЕНПФ':'Сақтандыру және БЖЗҚ','Принимаем медицинскую страховку и пенсионные накопления':'Медициналық сақтандыру және зейнетақы жинақтарын қабылдаймыз',
'Запишитесь на бесплатную консультацию':'Тегін кеңесге жазылыңыз',
'Приходите на осмотр и получите персональный план лечения. Без скрытых платежей.':'Тексеруге келіңіз және жеке емдеу жоспарын алыңыз. Жасырын төлемдерсіз.',
'Записаться на приём':'Қабылдауға жазылу','Записаться через WhatsApp':'WhatsApp арқылы жазылу',
'Фото — лечение зубов':'Фото — тіс емдеу','Фото — детская стоматология':'Фото — балалар стоматологиясы','Фото — имплантация':'Фото — имплантация','Фото — ортодонтия':'Фото — ортодонтия','Фото — профгигиена':'Фото — кәсіби гигиена','Фото — протезирование':'Фото — протездеу',
// ABOUT page
'Клиника, которой':'Отбасылар','доверяют семьи':'сенетін клиника',
'Mega Dent — это место, где качественная стоматология сочетается с заботой о каждом пациенте. Мы работаем с 2017 года и помогли более 12 000 пациентов обрести здоровую улыбку.':'Mega Dent — сапалы стоматология мен әрбір пациентке қамқорлық үйлесетін орын. 2017 жылдан бері жұмыс істейміз және 12 000-нан астам пациентке сау күлкі сыйладық.',
'Наша история':'Біздің тарих','Почему нам':'Бізге неге','доверяют?':'сенеді?',
'Мы основали Mega Dent с простой миссией: сделать качественную стоматологию доступной и комфортной для каждой семьи. За 8 лет работы мы выросли из небольшого кабинета в полноценную клинику с командой из 8 специалистов.':'Mega Dent-ті қарапайым миссиямен құрдық: сапалы стоматологияны әрбір отбасы үшін қолжетімді ету. 8 жылда шағын кабинеттен 8 маманнан тұратын клиникаға өстік.',
'Работаем на новейшем оборудовании европейских и корейских производителей. Цифровая рентген-диагностика с минимальной дозой облучения.':'Еуропалық және кореялық ең жаңа жабдықтарда жұмыс істейміз. Ең аз сәулеленумен цифрлық рентген-диагностика.',
'Наши врачи регулярно проходят обучение в Казахстане, Корее и Европе, владеют новейшими техниками лечения.':'Дәрігерлеріміз Қазақстанда, Кореяда және Еуропада үнемі оқудан өтеді, ең жаңа емдеу техникаларын меңгерген.',
'Многоуровневая система стерилизации, индивидуальные расходные материалы и комфортные кресла.':'Көп деңгейлі стерилизация жүйесі, жеке шығын материалдары және ыңғайлы кресло.',
'Составляем подробный план лечения с точной стоимостью до начала работы. Никаких скрытых платежей.':'Жұмысты бастамас бұрын нақты құны бар емдеу жоспарын жасаймыз. Жасырын төлемдер жоқ.',
'Наши ценности':'Біздің құндылықтар','Принципы нашей работы':'Біздің жұмыс қағидаларымыз',
'Доверие':'Сенім','Честно рассказываем о состоянии зубов, предлагаем только необходимые процедуры и не навязываем лишнего.':'Тістердің жағдайы туралы адал айтамыз, тек қажетті процедураларды ұсынамыз.',
'Инновации':'Инновациялар','Следим за новинками стоматологии, внедряем передовые методики и оборудование для лучших результатов.':'Стоматология жаңалықтарын қадағалаймыз, озық әдістемелер мен жабдықтарды енгіземіз.',
'Семейный подход':'Отбасылық тәсіл','Работаем со всеми возрастами — от малышей до людей старшего возраста. У нас лечится вся семья.':'Барлық жастағылармен жұмыс істейміз. Бізде бүкіл отбасы емделеді.',
'История':'Тарих','Наш путь':'Біздің жол',
'Открытие клиники':'Клиниканың ашылуы','Mega Dent открыл двери для первых пациентов в Алматы на ул. Жандосова. Два кресла, три специалиста и большие амбиции.':'Mega Dent Алматыда Жандосов көшесінде алғашқы пациенттер үшін есік ашты. Екі кресло, үш маман.',
'Расширение команды':'Команданы кеңейту','Открыли отделение детской стоматологии. Присоединились ортодонт и детский стоматолог.':'Балалар стоматологиясы бөлімшесін аштық. Ортодонт және балалар стоматологы қосылды.',
'Новое оборудование':'Жаңа жабдық','Полное обновление оборудования: цифровой рентген, дентальный микроскоп, лазер для мягких тканей.':'Жабдықты толық жаңарту: цифрлық рентген, дентальды микроскоп, жұмсақ тіндерге арналған лазер.',
'10 000 пациентов':'10 000 пациент','Перешагнули рубеж в 10 000 довольных пациентов. Команда выросла до 8 специалистов.':'10 000 риза пациент рубежін аттық. Команда 8 маманға дейін өсті.',
'Сегодня':'Бүгін','Продолжаем расти и совершенствоваться. 12 000+ пациентов, новые технологии и неизменная миссия — забота о вашей улыбке.':'Өсуді жалғастырамыз. 12 000+ пациент, жаңа технологиялар және миссиямыз — сіздің күлкіңізге қамқорлық.',
'Станьте частью':'Біздің пациенттер','нашей семьи пациентов':'отбасының мүшесі болыңыз',
'Приходите на бесплатную консультацию и убедитесь в нашем подходе сами.':'Тегін кеңесге келіңіз және біздің тәсілімізге өзіңіз көз жеткізіңіз.',
// DOCTORS page
'Наша команда':'Біздің команда','Врачи, которым':'Сіз сене алатын','вы можете доверять':'дәрігерлер',
'8 опытных специалистов, которые постоянно повышают квалификацию и владеют современными методиками лечения.':'8 тәжірибелі маман, олар үнемі біліктілігін арттырады және заманауи емдеу әдістемелерін меңгерген.',
'Детский стоматолог':'Балалар стоматологы','Стоматолог-терапевт':'Стоматолог-терапевт','Хирург-имплантолог':'Хирург-имплантолог','Стоматолог-ортопед':'Стоматолог-ортопед','Стоматолог-хирург':'Стоматолог-хирург','Стоматолог-гигиенист':'Стоматолог-гигиенист','Стоматолог-ортодонт':'Стоматолог-ортодонт',
'Специалист по эндодонтическому лечению. Работает с дентальным микроскопом.':'Эндодонтиялық емдеу маманы. Дентальды микроскоппен жұмыс істейді.',
'Мастер адаптации маленьких пациентов. Лечение без слёз и страха.':'Кіші пациенттерді бейімдеу шебері. Көз жассыз және қорқынышсыз емдеу.',
'Проводит имплантацию любой сложности. Обучался в Южной Корее.':'Кез келген күрделіліктегі имплантация жүргізеді. Оңтүстік Кореяда оқыған.',
'Эксперт по эстетической реставрации и лечению кариеса.':'Эстетикалық қалпына келтіру және кариесті емдеу сарапшысы.',
'Специалист по протезированию: коронки, виниры, мостовидные конструкции.':'Протездеу маманы: тәждер, винирлер, көпір конструкциялар.',
'Удаление зубов любой сложности, хирургическая пародонтология.':'Кез келген күрделіліктегі тіс жұлу, хирургиялық пародонтология.',
'Профессиональная гигиена, отбеливание, профилактика заболеваний дёсен.':'Кәсіби гигиена, ағарту, қызыл иек ауруларының алдын алу.',
'Исправление прикуса у детей и взрослых: брекеты, элайнеры, пластинки.':'Балалар мен ересектерде тістеуді түзету: брекеттер, элайнерлер, пластинкалар.',
'Опыт работы более 12 лет':'12 жылдан астам тәжірибе','Опыт работы более 8 лет':'8 жылдан астам тәжірибе','Опыт работы более 10 лет':'10 жылдан астам тәжірибе','Опыт работы более 7 лет':'7 жылдан астам тәжірибе','Опыт работы более 9 лет':'9 жылдан астам тәжірибе','Опыт работы более 11 лет':'11 жылдан астам тәжірибе','Опыт работы более 5 лет':'5 жылдан астам тәжірибе','Опыт работы более 6 лет':'6 жылдан астам тәжірибе',
'Запишитесь к нашим':'Біздің мамандарға','специалистам':'жазылыңыз',
'Наши врачи помогут решить любую стоматологическую проблему. Первая консультация — бесплатно.':'Біздің дәрігерлер кез келген стоматологиялық мәселені шешуге көмектеседі. Алғашқы кеңес — тегін.',
// REVIEWS page
'Что говорят наши':'Біздің пациенттер','пациенты':'не айтады',
'Мы гордимся каждым отзывом. Благодарность наших пациентов — лучшая награда для нашей команды.':'Біз әрбір пікірді мақтан тұтамыз. Пациенттеріміздің ризашылығы — команда үшін ең жақсы марапат.',
'Привели ребёнка с сильным страхом стоматологов. Доктор Юнусов нашёл подход — теперь дочка сама просится на осмотр! Огромное спасибо за терпение и профессионализм.':'Баланы стоматологтардан қатты қорқатын күйде алып келдік. Доктор Юнусов тәсіл тапты — енді қызымыз өзі тексеруге барғысы келеді! Зор рахмет.',
'Делала имплантацию — весь процесс прошёл комфортно. Врач подробно объяснил каждый этап, результат превзошёл ожидания. Рекомендую всем знакомым!':'Имплантация жасаттым — бүкіл процесс жайлы өтті. Дәрігер әрбір кезеңді түсіндірді, нәтиже күткеннен асып түсті. Барлық таныстарыма ұсынамын!',
'Лечу зубы всей семьёй только здесь. Очень нравится отношение к пациентам — всё подробно объясняют и никогда не навязывают лишних процедур. Лучшая клиника!':'Тістерімді бүкіл отбасыммен тек мұнда емдетемін. Пациенттерге деген қарым-қатынас өте ұнайды. Ең жақсы клиника!',
'Ставила брекеты у ортодонта Ешмуханбетова. Он очень подробно объяснил план лечения и показал 3D-модель. Через год результат — ровные зубы! Невероятно благодарна.':'Ортодонт Ешмуханбетовта брекет қойдым. Емдеу жоспарын егжей-тегжейлі түсіндіріп, 3D-модельді көрсетті. Бір жылдан кейін — тегіс тістер! Өте ризамын.',
'Пришла на профессиональную чистку и осталась лечить зубы. Всё честно и прозрачно — показали снимки, объяснили что и зачем. Цены адекватные, ещё и рассрочка есть.':'Кәсіби тазалауға келдім және тіс емдетуге қалдым. Бәрі адал және ашық. Бағалар қолжетімді, бөліп төлеу де бар.',
'Лечил сложный канал под микроскопом у доктора Малгаждар. Очень аккуратная и точная работа. Зуб спасли! До этого в другой клинике хотели удалять.':'Доктор Малгаждарда микроскоппен күрделі өзекті емдедім. Өте ұқыпты жұмыс. Тісті сақтап қалды!',
'Делал протезирование у доктора Аяган. Коронки выглядят как настоящие зубы — даже друзья не замечают разницу. Очень доволен результатом и сервисом.':'Доктор Аяганда протездеу жасаттым. Тәждер нағыз тістер сияқты — достарым да айырмашылықты байқамайды. Нәтижеге өте ризамын.',
'Удаляла зуб мудрости у хирурга Сейфуллина. Боялась ужасно, но всё прошло быстро и без боли. Через неделю всё зажило. Очень профессиональный врач!':'Хирург Сейфуллинде ақыл тісін жұлдырдым. Бәрі тез және ауырсызданусыз өтті. Өте кәсіби дәрігер!',
'Оба ребёнка лечатся у доктора Толен. Она замечательно ладит с детьми, создаёт игровую атмосферу. Дети перестали бояться стоматолога — это бесценно!':'Екі балам да доктор Толенде емделеді. Ол балалармен тамаша тіл табысады. Балалар стоматологтан қорқпайтын болды — баға жетпес!',
'Январь 2026':'Қаңтар 2026','Декабрь 2025':'Желтоқсан 2025','Ноябрь 2025':'Қараша 2025','Октябрь 2025':'Қазан 2025','Сентябрь 2025':'Қыркүйек 2025','Август 2025':'Тамыз 2025','Июль 2025':'Шілде 2025','Июнь 2025':'Маусым 2025','Май 2025':'Мамыр 2025',
'Присоединяйтесь к нашим':'Біздің риза','довольным пациентам':'пациенттерімізге қосылыңыз',
'Запишитесь на бесплатную консультацию и убедитесь в качестве нашего сервиса лично.':'Тегін кеңесге жазылыңыз және сервис сапасына өзіңіз көз жеткізіңіз.',
// CONTACTS page
'Приходите,':'Келіңіз,','мы вас ждём!':'біз сізді күтеміз!',
'Мы находимся в удобном месте в Алматы. Свяжитесь с нами любым удобным способом или приходите лично.':'Біз Алматыда ыңғайлы жерде орналасқанбыз. Бізбен кез келген тәсілмен байланысыңыз немесе өзіңіз келіңіз.',
'Как нас найти':'Бізді қалай табуға болады','Свяжитесь с нами':'Бізбен байланысыңыз',
'Адрес':'Мекенжай','г. Алматы, ул. Жандосова 60А':'Алматы қ., Жандосов к-сі 60А','Телефон':'Телефон',
'Написать в WhatsApp':'WhatsApp-қа жазу','График работы':'Жұмыс кестесі',
'Понедельник — Пятница':'Дүйсенбі — Жұма','Суббота':'Сенбі','Воскресенье':'Жексенбі','Выходной':'Демалыс',
'Карта Google Maps':'Google Maps картасы','ул. Жандосова 60А, Алматы':'Жандосов к-сі 60А, Алматы',
// Index hero long
'Современная стоматология для детей и взрослых в Алматы. Безболезненное лечение, профессиональная команда и индивидуальный подход к каждому пациенту.':'Алматыдағы балалар мен ересектерге арналған заманауи стоматология. Ауырсызданусыз емдеу, кәсіби команда және жеке тәсіл.',
};
const DR={}; for(const[r,k]of Object.entries(D))DR[k]=r;

/* ═══ ROBUST TRANSLATION via TreeWalker ═══ */
function translate(lang){
  const d=lang==='kz'?D:DR;
  // TreeWalker: find ALL text nodes in body
  const tw=document.createTreeWalker(document.body,NodeFilter.SHOW_TEXT,{
    acceptNode:function(n){
      const p=n.parentElement;
      if(!p)return NodeFilter.FILTER_REJECT;
      const tag=p.tagName;
      if(tag==='SCRIPT'||tag==='STYLE'||p.closest('svg'))return NodeFilter.FILTER_REJECT;
      return NodeFilter.FILTER_ACCEPT;
    }
  });
  const nodes=[];
  while(tw.nextNode()) nodes.push(tw.currentNode);
  
  for(const node of nodes){
    const raw=node.textContent;
    const t=raw.trim();
    if(!t||t.length<2) continue;
    if(d[t]){
      // Preserve leading/trailing whitespace
      node.textContent=raw.replace(t,d[t]);
    }
  }
}

/* ═══ SAVE/RESTORE for clean switching ═══ */
let savedHTML=null;
function switchLang(lang){
  if(lang===curL)return;
  if(lang==='ru'&&savedHTML){
    const s=window.scrollY;
    document.body.innerHTML=savedHTML;
    window.scrollTo(0,s);
    curL='ru'; localStorage.setItem('ml','ru');
    boot();return;
  }
  curL=lang; localStorage.setItem('ml',lang);
  if(lang==='kz'){
    if(!savedHTML)savedHTML=document.body.innerHTML;
    translate('kz');
  }
  mkModal();mkBtns();mkLang();updLB();
}
function updLB(){document.querySelectorAll('.lang-btn').forEach(b=>b.classList.toggle('active',b.textContent.trim().toLowerCase()===curL));}

/* ═══ BOOKING MODAL ═══ */
const BU={
  ru:{t:'Записаться на приём',s:'Заполните форму и мы свяжемся с вами',n:'Ваше имя',p:'Телефон',d:'Врач',sv:'Услуга',dt:'Желаемая дата',c:'Комментарий',pn:'Как к вам обращаться',pp:'+7 (___) ___-__-__',pc:'Дополнительные пожелания...',ad:'Любой врач',ss:'Выберите услугу',nt:'Мы ответим в течение 15 минут',fb:'Записаться',hi:'Здравствуйте! Хочу записаться в Mega Dent.',mn:'Имя',mp:'Телефон',md:'Врач',ms:'Услуга',mdt:'Дата',mc:'Комментарий',ma:'Любой',mno:'Не указано',bk:'Записаться'},
  kz:{t:'Қабылдауға жазылу',s:'Форманы толтырыңыз, біз сізбен хабарласамыз',n:'Атыңыз',p:'Телефон',d:'Дәрігер',sv:'Қызмет',dt:'Қалаған күні',c:'Пікір',pn:'Сізге қалай хабарласуға болады',pp:'+7 (___) ___-__-__',pc:'Қосымша тілектер...',ad:'Кез келген дәрігер',ss:'Қызметті таңдаңыз',nt:'Біз 15 минут ішінде жауап береміз',fb:'Жазылу',hi:'Сәлеметсіз бе! Mega Dent-ке жазылғым келеді.',mn:'Аты',mp:'Телефон',md:'Дәрігер',ms:'Қызмет',mdt:'Күні',mc:'Пікір',ma:'Кез келген',mno:'Көрсетілмеген',bk:'Жазылу'}
};
const DL=[{n:'Маммадова Г.М.',r:'Терапевт'},{n:'Юнусов А.Р.',r:'Детский'},{n:'Толен М.Б.',r:'Имплантолог'},{n:'Аяган Н.С.',r:'Терапевт'},{n:'Ешмуханбетов Д.К.',r:'Ортопед'},{n:'Сейфуллин Е.А.',r:'Хирург'},{n:'Малгаждар А.Т.',r:'Гигиенист'},{n:'Жандосова У.Ж.',r:'Ортодонт'}];
const SL={ru:['Лечение зубов','Детская стоматология','Имплантация','Ортодонтия','Проф. гигиена','Протезирование'],kz:['Тіс емдеу','Балалар стоматологиясы','Имплантация','Ортодонтия','Кәсіби гигиена','Протездеу']};

function mkModal(){
  const t=BU[curL],sl=SL[curL];
  const dO=DL.map(d=>`<option value="${d.n} — ${d.r}">${d.n} — ${d.r}</option>`).join('');
  const sO=sl.map(s=>`<option value="${s}">${s}</option>`).join('');
  document.getElementById('bookingOverlay')?.remove();document.getElementById('bookingModal')?.remove();
  document.body.insertAdjacentHTML('beforeend',`<div class="booking-overlay" id="bookingOverlay" onclick="closeBooking()"></div><div class="booking-modal" id="bookingModal"><button class="booking-close" onclick="closeBooking()">✕</button><h3>${t.t}</h3><p class="booking-subtitle">${t.s}</p><form class="booking-form" onsubmit="return false;"><div class="form-row"><div class="form-group"><label>${t.n}</label><input type="text" id="bkName" placeholder="${t.pn}" required></div><div class="form-group"><label>${t.p}</label><input type="tel" id="bkPhone" placeholder="${t.pp}" required></div></div><div class="form-row"><div class="form-group"><label>${t.d}</label><select id="bkDoctor"><option value="">${t.ad}</option>${dO}</select></div><div class="form-group"><label>${t.sv}</label><select id="bkService"><option value="">${t.ss}</option>${sO}</select></div></div><div class="form-group"><label>${t.dt}</label><input type="date" id="bkDate" min="${new Date().toISOString().split('T')[0]}"></div><div class="form-group"><label>${t.c}</label><textarea id="bkComment" rows="2" placeholder="${t.pc}"></textarea></div><div class="booking-channels"><button type="button" class="channel-btn whatsapp" onclick="submitBooking('wa')"><svg width="22" height="22" viewBox="0 0 24 24" fill="currentColor"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/></svg>WhatsApp</button><button type="button" class="channel-btn telegram" onclick="submitBooking('tg')"><svg width="22" height="22" viewBox="0 0 24 24" fill="currentColor"><path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.479.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"/></svg>Telegram</button></div><p class="booking-note">${t.nt}</p></form></div>`);
  let fab=document.getElementById('bookingFab');
  if(!fab){fab=document.createElement('button');fab.className='booking-fab';fab.id='bookingFab';fab.onclick=()=>openBooking();document.body.appendChild(fab);}
  fab.innerHTML=`<svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/></svg><span>${t.fb}</span>`;
}
function openBooking(dn){const o=document.getElementById('bookingOverlay'),m=document.getElementById('bookingModal');if(!o||!m)return;o.classList.add('open');m.classList.add('open');document.body.style.overflow='hidden';if(dn){const s=document.getElementById('bkDoctor');for(let i=0;i<s.options.length;i++)if(s.options[i].value.includes(dn)){s.selectedIndex=i;break;}}}
function closeBooking(){document.getElementById('bookingOverlay')?.classList.remove('open');document.getElementById('bookingModal')?.classList.remove('open');document.body.style.overflow='';}
function submitBooking(ch){const t=BU[curL],n=document.getElementById('bkName').value.trim(),p=document.getElementById('bkPhone').value.trim();if(!n||!p){if(!n)document.getElementById('bkName').style.borderColor='#e74c3c';if(!p)document.getElementById('bkPhone').style.borderColor='#e74c3c';setTimeout(()=>{document.getElementById('bkName').style.borderColor='';document.getElementById('bkPhone').style.borderColor='';},2e3);return;}const d=document.getElementById('bkDoctor').value||t.ma,s=document.getElementById('bkService').value||t.mno,dt=document.getElementById('bkDate').value||t.mno,c=document.getElementById('bkComment').value.trim();let m=`${t.hi}\n\n${t.mn}: ${n}\n${t.mp}: ${p}\n${t.md}: ${d}\n${t.ms}: ${s}\n${t.mdt}: ${dt}`;if(c)m+=`\n${t.mc}: ${c}`;if(ch==='wa')window.open(`https://wa.me/${WA}?text=${encodeURIComponent(m)}`,'_blank');else window.open(`${TG}?start=booking`,'_blank');closeBooking();}

/* ═══ ALWAYS-VISIBLE BOOK BUTTONS on service & doctor cards ═══ */
function mkBtns(){
  const lbl=curL==='kz'?'Жазылу':'Записаться';
  const ico='<svg width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/></svg>';
  // Doctor cards
  document.querySelectorAll('.doctor-card').forEach(c=>{
    if(c.querySelector('.btn-book'))return;
    const ne=c.querySelector('.doctor-name');if(!ne)return;
    const nm=ne.textContent.trim();
    const b=document.createElement('button');b.className='btn-book';b.onclick=()=>openBooking(nm);
    b.innerHTML=`${ico}<span>${lbl}</span>`;
    c.querySelector('.doctor-info')?.appendChild(b);
  });
  // Service cards on INDEX page (service-card class)
  document.querySelectorAll('.service-card').forEach(c=>{
    if(c.querySelector('.btn-book'))return;
    const b=document.createElement('a');b.className='btn-book';b.href='#';
    b.onclick=function(e){e.preventDefault();openBooking();};
    b.innerHTML=`${ico}<span>${lbl}</span>`;
    c.appendChild(b);
  });
  // Service detail cards on SERVICES page
  document.querySelectorAll('.service-detail').forEach(c=>{
    const existing=c.querySelector('.btn-primary');
    if(existing) existing.textContent=lbl;
  });
}

/* ═══ LANG SWITCHER ═══ */
function mkLang(){
  const nav=document.querySelector('.nav-links');
  if(nav&&!nav.querySelector('.lang-switch')){const li=document.createElement('li');li.innerHTML=`<div class="lang-switch"><button class="lang-btn ${curL==='ru'?'active':''}" onclick="switchLang('ru')">RU</button><button class="lang-btn ${curL==='kz'?'active':''}" onclick="switchLang('kz')">KZ</button></div>`;const last=nav.querySelector('li:last-child');nav.insertBefore(li,last);}
  const mob=document.getElementById('mobileMenu');
  if(mob&&!mob.querySelector('.lang-switch')){const d=document.createElement('div');d.style.cssText='display:flex;justify-content:center;margin-top:16px;';d.innerHTML=`<div class="lang-switch" style="background:rgba(255,255,255,0.1);"><button class="lang-btn ${curL==='ru'?'active':''}" onclick="switchLang('ru')">RU</button><button class="lang-btn ${curL==='kz'?'active':''}" onclick="switchLang('kz')">KZ</button></div>`;mob.appendChild(d);}
}

/* ═══ BOOT ═══ */
function boot(){
  const h=document.getElementById('header');
  if(h){let fn=()=>h.classList.toggle('scrolled',window.scrollY>20);window.removeEventListener('scroll',fn);window.addEventListener('scroll',fn);fn();}
  document.querySelectorAll('.reveal').forEach(el=>{
    const ob=new IntersectionObserver((en)=>{en.forEach(e=>{if(e.isIntersecting){e.target.classList.add('visible');ob.unobserve(e.target);}});},{threshold:0.15,rootMargin:'0px 0px -40px 0px'});
    ob.observe(el);
  });
  window.toggleMenu=function(){document.getElementById('mobileMenu')?.classList.toggle('open');};
  document.addEventListener('keydown',e=>{if(e.key==='Escape')closeBooking();});
  mkLang();mkModal();mkBtns();updLB();
}
document.addEventListener('DOMContentLoaded',function(){
  savedHTML=document.body.innerHTML;
  boot();
  if(curL==='kz'){translate('kz');mkModal();mkBtns();mkLang();updLB();}
});
