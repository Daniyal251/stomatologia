/* MEGA DENT — App JS v2 — Dictionary-based RU↔KZ + Booking Modal */
const WHATSAPP_NUMBER = '77715249535';
const TELEGRAM_BOT = 'https://t.me/MegaDentBot';
let currentLang = localStorage.getItem('megadent_lang') || 'ru';

const dict = {
'Главная':'Басты бет','Услуги':'Қызметтер','О клинике':'Клиника туралы','Врачи':'Дәрігерлер','Отзывы':'Пікірлер','Контакты':'Байланыс','Записаться':'Жазылу','Записаться на приём':'Қабылдауға жазылу','Записаться через WhatsApp':'WhatsApp арқылы жазылу','Наши услуги':'Біздің қызметтер','Подробнее':'Толығырақ','Подробнее о клинике':'Клиника туралы толығырақ','Позвонить':'Қоңырау шалу',
'Семейная стоматология':'Отбасылық стоматология','лет опыта':'жыл тәжірибе','довольных пациентов':'риза пациент','специалистов':'маман','Безболезненно':'Ауырсызданусыз','Современная анестезия':'Заманауи анестезия','Фото клиники':'Клиника фотосы','Фото интерьера клиники':'Клиника интерьерінің фотосы',
'Полный спектр':'Толық спектр','стоматологических услуг':'стоматологиялық қызметтер',
'Лечение зубов':'Тіс емдеу','От простого кариеса до сложных случаев пульпита. Безболезненно и с гарантией качества.':'Қарапайым кариестен пульпиттің күрделі жағдайларына дейін. Ауырсызданусыз және сапа кепілдігімен.',
'Детская стоматология':'Балалар стоматологиясы','Бережное лечение для маленьких пациентов с учётом возрастных особенностей.':'Жас ерекшеліктерін ескере отырып, кіші пациенттерді ұқыпты емдеу.',
'Имплантация':'Имплантация','Установка имплантов с использованием современных технологий и материалов мирового уровня.':'Заманауи технологиялар мен әлемдік деңгейдегі материалдарды пайдалана отырып имплант орнату.',
'Ортодонтия':'Ортодонтия','Исправление прикуса у детей и взрослых: брекеты, элайнеры и современные техники.':'Балалар мен ересектерде тістеуді түзету: брекеттер, элайнерлер және заманауи техникалар.',
'Профгигиена':'Кәсіби гигиена','Профессиональная чистка, отбеливание и укрепление эмали для здоровой улыбки.':'Сау күлкі үшін кәсіби тазалау, ағарту және эмальды нығайту.',
'Протезирование':'Протездеу','Коронки, виниры, мосты. Восстановление красивой и функциональной улыбки.':'Тәждер, винирлер, көпірлер. Әдемі және функционалды күлкіні қалпына келтіру.',
'Почему выбирают':'Неліктен таңдайды','Mega Dent?':'Mega Dent?',
'Мы создали пространство, где каждый член семьи получает качественную стоматологическую помощь в комфортной обстановке.':'Біз отбасының әрбір мүшесі ыңғайлы жағдайда сапалы стоматологиялық көмек алатын кеңістік жасадық.',
'Современное оборудование':'Заманауи жабдық','Работаем на новейшем оборудовании европейских и корейских производителей':'Еуропалық және кореялық өндірушілердің ең жаңа жабдықтарында жұмыс істейміз',
'Опытная команда':'Тәжірибелі команда','8 специалистов с опытом работы от 5 до 15 лет':'5-тен 15 жылға дейін тәжірибесі бар 8 маман',
'Комфорт и безопасность':'Жайлылық пен қауіпсіздік','Стерильность на уровне операционных, уютная атмосфера':'Операциялық деңгейдегі стерильділік, жайлы атмосфера',
'Прозрачные цены':'Ашық бағалар','Рассрочка через Kaspi, приём страховок и ЕНПФ':'Kaspi арқылы бөліп төлеу, сақтандыру және БЖЗҚ қабылдау',
'Запишитесь на бесплатную':'Тегін кеңесге','консультацию':'жазылыңыз',
'Приходите на осмотр и получите персональный план лечения. Без скрытых платежей — только честная стоматология.':'Тексеруге келіңіз және жеке емдеу жоспарын алыңыз. Жасырын төлемдерсіз — тек адал стоматология.',
'Семейная стоматология для детей и взрослых. Забота о вашей улыбке — наша главная миссия.':'Балалар мен ересектерге арналған отбасылық стоматология. Сіздің күлкіңізге қамқорлық — біздің басты миссиямыз.',
'Семейная стоматология для детей и взрослых.':'Балалар мен ересектерге арналған отбасылық стоматология.',
'Гигиена':'Гигиена','Клиника':'Клиника','О нас':'Біз туралы',
'© 2026 Mega Dent. Все права защищены.':'© 2026 Mega Dent. Барлық құқықтар қорғалған.','© 2026 Mega Dent.':'© 2026 Mega Dent.',
'Сайт-пример дизайна':'Дизайн үлгісі','Семейная стоматология в Алматы':'Алматыдағы отбасылық стоматология',
'лет заботы':'жыл қамқорлық','о пациентах':'пациенттерге',
// SERVICES PAGE
'От профилактики до сложных хирургических вмешательств — всё в одной клинике для всей семьи. Современные методики и материалы мирового уровня.':'Алдын алудан күрделі хирургиялық араласуларға дейін — бүкіл отбасы үшін бір клиникада. Әлемдік деңгейдегі заманауи әдістемелер мен материалдар.',
'От профилактики до сложных хирургических вмешательств — всё в одной клинике для всей семьи':'Алдын алудан күрделі хирургиялық араласуларға дейін — бүкіл отбасы үшін бір клиникада',
'Мы лечим все виды кариеса, пульпит, периодонтит и другие заболевания зубов. Используем современные пломбировочные материалы и работаем под микроскопом для максимальной точности.':'Біз кариестің барлық түрлерін, пульпитті, периодонтитті және тістің басқа ауруларын емдейміз. Максималды дәлдік үшін заманауи пломбалау материалдарын қолданамыз және микроскоппен жұмыс істейміз.',
'Лечение кариеса любой сложности':'Кез келген күрделіліктегі кариесті емдеу','Эндодонтическое лечение каналов':'Өзектерді эндодонтиялық емдеу','Реставрация зубов фотополимерами':'Тістерді фотополимерлермен қалпына келтіру','Лечение под микроскопом':'Микроскоппен емдеу',
'Мы создали дружелюбную атмосферу для маленьких пациентов. Наши врачи умеют находить подход к каждому ребёнку и делать визит к стоматологу приятным.':'Біз кішкентай пациенттер үшін достық атмосфера жасадық. Біздің дәрігерлер әрбір балаға тәсіл тауып, стоматологқа баруды жағымды етеді.',
'Лечение молочных зубов':'Сүт тістерін емдеу','Герметизация фиссур':'Фиссураларды герметикалау','Фторирование и укрепление эмали':'Фторлау және эмальды нығайту','Адаптация ребёнка к лечению':'Баланы емдеуге бейімдеу',
'Восстановление утраченных зубов с помощью дентальных имплантов — надёжный и долговечный результат на десятилетия.':'Дентальды имплантаттардың көмегімен жоғалған тістерді қалпына келтіру — ондаған жылдарға сенімді және берік нәтиже.',
'Одноэтапная и двухэтапная имплантация':'Бір кезеңді және екі кезеңді имплантация','Костная пластика и синус-лифтинг':'Сүйек пластикасы және синус-лифтинг','Импланты Straumann, Osstem, Dentium':'Straumann, Osstem, Dentium имплантаттары','Гарантия на имплантацию':'Имплантацияға кепілдік',
'Красивая улыбка и правильный прикус для детей и взрослых. Мы подбираем оптимальный метод лечения для каждого пациента.':'Балалар мен ересектерге арналған әдемі күлкі және дұрыс тістеу. Біз әрбір пациент үшін оңтайлы емдеу әдісін таңдаймыз.',
'Металлические и керамические брекеты':'Металл және керамикалық брекеттер','Прозрачные элайнеры':'Мөлдір элайнерлер','Детская ортодонтия (пластинки, трейнеры)':'Балалар ортодонтиясы (пластинкалар, трейнерлер)','3D-планирование результата':'3D-нәтижені жоспарлау',
'Профессиональная гигиена':'Кәсіби гигиена',
'Регулярная профессиональная чистка — основа здоровья зубов и дёсен. Мы удаляем зубной камень, налёт и проводим укрепление эмали.':'Тұрақты кәсіби тазалау — тіс пен қызыл иектің денсаулығының негізі. Біз тіс тасын, қабатын алып тастаймыз және эмальды нығайтамыз.',
'Ультразвуковая чистка':'Ультрадыбыстық тазалау','Air-Flow — удаление пигментного налёта':'Air-Flow — пигменттік қабатты алу','Профессиональное отбеливание':'Кәсіби ағарту','Фторирование и реминерализация':'Фторлау және реминерализация',
'Восстановление формы и функции зубов с помощью современных протезов. Индивидуальный подбор для естественного вида и максимального комфорта.':'Заманауи протездердің көмегімен тістердің пішіні мен қызметін қалпына келтіру. Табиғи көрініс және максималды жайлылық үшін жеке таңдау.',
'Циркониевые и керамические коронки':'Цирконий және керамикалық тәждер','Виниры и люминиры':'Винирлер және люминирлер','Мостовидные протезы':'Көпір протездер','Съёмное протезирование':'Алмалы протездеу',
'Оплата':'Төлем','Удобные условия':'Ыңғайлы шарттар','оплаты':'төлем',
'Гибкие варианты оплаты, чтобы качественная стоматология была доступна каждой семье':'Сапалы стоматология әрбір отбасына қолжетімді болуы үшін икемді төлем нұсқалары',
'Бесплатная консультация':'Тегін кеңес','Первичный осмотр и план лечения — бесплатно':'Алғашқы тексеру және емдеу жоспары — тегін',
'Рассрочка Kaspi':'Kaspi бөліп төлеу','Рассрочка на 12 и 24 месяца без переплат':'12 және 24 айға артық төлемсіз бөліп төлеу',
'Страховка и ЕНПФ':'Сақтандыру және БЖЗҚ','Принимаем медицинскую страховку и пенсионные накопления':'Медициналық сақтандыру және зейнетақы жинақтарын қабылдаймыз',
'Запишитесь на бесплатную консультацию':'Тегін кеңесге жазылыңыз','Приходите на осмотр и получите персональный план лечения. Без скрытых платежей.':'Тексеруге келіңіз және жеке емдеу жоспарын алыңыз. Жасырын төлемдерсіз.',
// ABOUT PAGE
'Клиника, которой':'Отбасылар','доверяют семьи':'сенетін клиника',
'Mega Dent — это место, где качественная стоматология сочетается с заботой о каждом пациенте. Мы работаем с 2017 года и помогли более 12 000 пациентов обрести здоровую улыбку.':'Mega Dent — сапалы стоматология мен әрбір пациентке қамқорлық үйлесетін орын. Біз 2017 жылдан бері жұмыс істейміз және 12 000-нан астам пациентке сау күлкі сыйладық.',
'Наша история':'Біздің тарих','Почему нам':'Бізге неге','доверяют?':'сенеді?',
'Мы основали Mega Dent с простой миссией: сделать качественную стоматологию доступной и комфортной для каждой семьи. За 8 лет работы мы выросли из небольшого кабинета в полноценную клинику с командой из 8 специалистов.':'Біз Mega Dent-ті қарапайым миссиямен құрдық: сапалы стоматологияны әрбір отбасы үшін қолжетімді және ыңғайлы ету. 8 жыл жұмыс барысында біз шағын кабинеттен 8 маманнан тұратын толыққанды клиникаға дейін өстік.',
'Работаем на новейшем оборудовании европейских и корейских производителей. Цифровая рентген-диагностика с минимальной дозой облучения.':'Еуропалық және кореялық өндірушілердің ең жаңа жабдықтарында жұмыс істейміз. Сәулеленудің ең аз дозасымен цифрлық рентген-диагностика.',
'Наши врачи регулярно проходят обучение в Казахстане, Корее и Европе, владеют новейшими техниками лечения.':'Біздің дәрігерлер Қазақстанда, Кореяда және Еуропада үнемі оқудан өтеді, ең жаңа емдеу техникаларын меңгерген.',
'Многоуровневая система стерилизации, индивидуальные расходные материалы и комфортные кресла.':'Көп деңгейлі стерилизация жүйесі, жеке шығын материалдары және ыңғайлы кресло.',
'Составляем подробный план лечения с точной стоимостью до начала работы. Никаких скрытых платежей.':'Жұмысты бастамас бұрын нақты құны бар егжей-тегжейлі емдеу жоспарын жасаймыз. Жасырын төлемдер жоқ.',
'Наши ценности':'Біздің құндылықтар','Принципы нашей работы':'Біздің жұмыс қағидаларымыз',
'Доверие':'Сенім','Честно рассказываем о состоянии зубов, предлагаем только необходимые процедуры и не навязываем лишнего.':'Тістердің жағдайы туралы адал айтамыз, тек қажетті процедураларды ұсынамыз және артық нәрсені мәжбүрлемейміз.',
'Инновации':'Инновациялар','Следим за новинками стоматологии, внедряем передовые методики и оборудование для лучших результатов.':'Стоматология жаңалықтарын қадағалаймыз, ең жақсы нәтиже үшін озық әдістемелер мен жабдықтарды енгіземіз.',
'Семейный подход':'Отбасылық тәсіл','Работаем со всеми возрастами — от малышей до людей старшего возраста. У нас лечится вся семья.':'Барлық жастағылармен жұмыс істейміз — сәбилерден егде жастағы адамдарға дейін. Бізде бүкіл отбасы емделеді.',
'История':'Тарих','Наш путь':'Біздің жол',
'Открытие клиники':'Клиниканың ашылуы','Mega Dent открыл двери для первых пациентов в Алматы на ул. Жандосова. Два кресла, три специалиста и большие амбиции.':'Mega Dent Алматыда Жандосов көшесінде алғашқы пациенттер үшін есік ашты. Екі кресло, үш маман және үлкен амбициялар.',
'Расширение команды':'Команданы кеңейту','Открыли отделение детской стоматологии. Присоединились ортодонт и детский стоматолог.':'Балалар стоматологиясы бөлімшесін аштық. Ортодонт және балалар стоматологы қосылды.',
'Новое оборудование':'Жаңа жабдық','Полное обновление оборудования: цифровой рентген, дентальный микроскоп, лазер для мягких тканей.':'Жабдықты толық жаңарту: цифрлық рентген, дентальды микроскоп, жұмсақ тіндерге арналған лазер.',
'10 000 пациентов':'10 000 пациент','Перешагнули рубеж в 10 000 довольных пациентов. Команда выросла до 8 специалистов.':'10 000 риза пациент рубежін аттық. Команда 8 маманға дейін өсті.',
'Сегодня':'Бүгін','Продолжаем расти и совершенствоваться. 12 000+ пациентов, новые технологии и неизменная миссия — забота о вашей улыбке.':'Өсуді және жетілуді жалғастырамыз. 12 000+ пациент, жаңа технологиялар және өзгермейтін миссия — сіздің күлкіңізге қамқорлық.',
'Станьте частью':'Біздің пациенттер','нашей семьи пациентов':'отбасының мүшесі болыңыз',
'Приходите на бесплатную консультацию и убедитесь в нашем подходе сами.':'Тегін кеңесге келіңіз және біздің тәсілімізге өзіңіз көз жеткізіңіз.',
// DOCTORS PAGE
'Наша команда':'Біздің команда','Врачи, которым':'Сіз сене алатын','вы можете доверять':'дәрігерлер',
'8 опытных специалистов, которые постоянно повышают квалификацию и владеют современными методиками лечения.':'8 тәжірибелі маман, олар үнемі біліктілігін арттырады және заманауи емдеу әдістемелерін меңгерген.',
'Детский стоматолог':'Балалар стоматологы',
'Специалист по эндодонтическому лечению. Работает с дентальным микроскопом.':'Эндодонтиялық емдеу маманы. Дентальды микроскоппен жұмыс істейді.',
'Мастер адаптации маленьких пациентов. Лечение без слёз и страха.':'Кіші пациенттерді бейімдеу шебері. Көз жассыз және қорқынышсыз емдеу.',
'Проводит имплантацию любой сложности. Обучался в Южной Корее.':'Кез келген күрделіліктегі имплантация жүргізеді. Оңтүстік Кореяда оқыған.',
'Эксперт по эстетической реставрации и лечению кариеса.':'Эстетикалық қалпына келтіру және кариесті емдеу сарапшысы.',
'Специалист по протезированию: коронки, виниры, мостовидные конструкции.':'Протездеу маманы: тәждер, винирлер, көпір конструкциялар.',
'Удаление зубов любой сложности, хирургическая пародонтология.':'Кез келген күрделіліктегі тіс жұлу, хирургиялық пародонтология.',
'Профессиональная гигиена, отбеливание, профилактика заболеваний дёсен.':'Кәсіби гигиена, ағарту, қызыл иек ауруларының алдын алу.',
'Исправление прикуса у детей и взрослых: брекеты, элайнеры, пластинки.':'Балалар мен ересектерде тістеуді түзету: брекеттер, элайнерлер, пластинкалар.',
'Опыт работы более 12 лет':'12 жылдан астам тәжірибе','Опыт работы более 8 лет':'8 жылдан астам тәжірибе','Опыт работы более 10 лет':'10 жылдан астам тәжірибе','Опыт работы более 7 лет':'7 жылдан астам тәжірибе','Опыт работы более 9 лет':'9 жылдан астам тәжірибе','Опыт работы более 11 лет':'11 жылдан астам тәжірибе','Опыт работы более 5 лет':'5 жылдан астам тәжірибе','Опыт работы более 6 лет':'6 жылдан астам тәжірибе',
'Запишитесь к нашим':'Біздің мамандарға','специалистам':'жазылыңыз',
'Наши врачи помогут решить любую стоматологическую проблему. Первая консультация — бесплатно.':'Біздің дәрігерлер кез келген стоматологиялық мәселені шешуге көмектеседі. Алғашқы кеңес — тегін.',
// REVIEWS PAGE
'Что говорят наши':'Біздің пациенттер','пациенты':'не айтады',
'Мы гордимся каждым отзывом. Благодарность наших пациентов — лучшая награда для нашей команды.':'Біз әрбір пікірді мақтан тұтамыз. Пациенттеріміздің ризашылығы — біздің команда үшін ең жақсы марапат.',
'Привели ребёнка с сильным страхом стоматологов. Доктор Юнусов нашёл подход — теперь дочка сама просится на осмотр! Огромное спасибо за терпение и профессионализм.':'Баланы стоматологтардан қатты қорқатын күйде алып келдік. Доктор Юнусов тәсіл тапты — енді қызымыз өзі тексеруге барғысы келеді! Шыдамдылығыңыз бен кәсібилігіңіз үшін зор рахмет.',
'Делала имплантацию — весь процесс прошёл комфортно. Врач подробно объяснил каждый этап, результат превзошёл ожидания. Рекомендую всем знакомым!':'Имплантация жасаттым — бүкіл процесс жайлы өтті. Дәрігер әрбір кезеңді егжей-тегжейлі түсіндірді, нәтиже күткеннен асып түсті. Барлық таныстарыма ұсынамын!',
'Лечу зубы всей семьёй только здесь. Очень нравится отношение к пациентам — всё подробно объясняют и никогда не навязывают лишних процедур. Лучшая клиника!':'Тістерімді бүкіл отбасыммен тек мұнда емдетемін. Пациенттерге деген қарым-қатынас өте ұнайды — бәрін егжей-тегжейлі түсіндіреді және ешқашан артық процедураларды мәжбүрлемейді. Ең жақсы клиника!',
'Ставила брекеты у ортодонта Ешмуханбетова. Он очень подробно объяснил план лечения и показал 3D-модель. Через год результат — ровные зубы! Невероятно благодарна.':'Ортодонт Ешмуханбетовта брекет қойдым. Ол емдеу жоспарын өте егжей-тегжейлі түсіндіріп, 3D-модельді көрсетті. Бір жылдан кейін нәтиже — тегіс тістер! Өте ризамын.',
'Пришла на профессиональную чистку и осталась лечить зубы. Всё честно и прозрачно — показали снимки, объяснили что и зачем. Цены адекватные, ещё и рассрочка есть.':'Кәсіби тазалауға келдім және тіс емдетуге қалдым. Бәрі адал және ашық — суреттерді көрсетті, не және неге екенін түсіндірді. Бағалар қолжетімді, тіпті бөліп төлеу де бар.',
'Лечил сложный канал под микроскопом у доктора Малгаждар. Очень аккуратная и точная работа. Зуб спасли! До этого в другой клинике хотели удалять.':'Доктор Малгаждарда микроскоппен күрделі өзекті емдедім. Өте ұқыпты және дәл жұмыс. Тісті сақтап қалды! Бұған дейін басқа клиникада жұлмақ болған.',
'Делал протезирование у доктора Аяган. Коронки выглядят как настоящие зубы — даже друзья не замечают разницу. Очень доволен результатом и сервисом.':'Доктор Аяганда протездеу жасаттым. Тәждер нағыз тістер сияқты көрінеді — тіпті достарым да айырмашылықты байқамайды. Нәтижеге және сервиске өте ризамын.',
'Удаляла зуб мудрости у хирурга Сейфуллина. Боялась ужасно, но всё прошло быстро и без боли. Через неделю всё зажило. Очень профессиональный врач!':'Хирург Сейфуллинде ақыл тісін жұлдырдым. Қатты қорқатынмын, бірақ бәрі тез және ауырсызданусыз өтті. Бір аптадан кейін бәрі жазылды. Өте кәсіби дәрігер!',
'Оба ребёнка лечатся у доктора Толен. Она замечательно ладит с детьми, создаёт игровую атмосферу. Дети перестали бояться стоматолога — это бесценно!':'Екі балам да доктор Толенде емделеді. Ол балалармен тамаша тіл табысады, ойын атмосферасын жасайды. Балалар стоматологтан қорқпайтын болды — бұл баға жетпес!',
'Январь 2026':'Қаңтар 2026','Декабрь 2025':'Желтоқсан 2025','Ноябрь 2025':'Қараша 2025','Октябрь 2025':'Қазан 2025','Сентябрь 2025':'Қыркүйек 2025','Август 2025':'Тамыз 2025','Июль 2025':'Шілде 2025','Июнь 2025':'Маусым 2025','Май 2025':'Мамыр 2025',
'Присоединяйтесь к нашим':'Біздің риза','довольным пациентам':'пациенттерімізге қосылыңыз',
'Запишитесь на бесплатную консультацию и убедитесь в качестве нашего сервиса лично.':'Тегін кеңесге жазылыңыз және біздің сервис сапасына өзіңіз көз жеткізіңіз.',
// CONTACTS PAGE
'Приходите,':'Келіңіз,','мы вас ждём!':'біз сізді күтеміз!',
'Мы находимся в удобном месте в Алматы. Свяжитесь с нами любым удобным способом или приходите на бесплатную консультацию.':'Біз Алматыда ыңғайлы жерде орналасқанбыз. Бізбен кез келген ыңғайлы тәсілмен байланысыңыз немесе тегін кеңесге келіңіз.',
'Как нас найти':'Бізді қалай табуға болады','Свяжитесь с нами':'Бізбен байланысыңыз',
'Адрес':'Мекенжай','г. Алматы, ул. Жандосова 60А':'Алматы қ., Жандосов к-сі 60А','Телефон':'Телефон',
'Написать в WhatsApp':'WhatsApp-қа жазу','График работы':'Жұмыс кестесі',
'Понедельник — Пятница':'Дүйсенбі — Жұма','Суббота':'Сенбі','Воскресенье':'Жексенбі','Выходной':'Демалыс',
'Карта Google Maps':'Google Maps картасы','ул. Жандосова 60А, Алматы':'Жандосов к-сі 60А, Алматы',
'Фото — лечение зубов':'Фото — тіс емдеу','Фото — детская стоматология':'Фото — балалар стоматологиясы','Фото — имплантация':'Фото — имплантация','Фото — ортодонтия':'Фото — ортодонтия','Фото — профгигиена':'Фото — кәсіби гигиена','Фото — протезирование':'Фото — протездеу',
};
const dictR = {}; for (const [r,k] of Object.entries(dict)) dictR[k] = r;

const bui = {
  ru:{title:'Записаться на приём',subtitle:'Заполните форму и мы свяжемся с вами',name:'Ваше имя',phone:'Телефон',doctor:'Врач',service:'Услуга',date:'Желаемая дата',comment:'Комментарий',phN:'Как к вам обращаться',phP:'+7 (___) ___-__-__',phC:'Дополнительные пожелания...',anyD:'Любой врач',selS:'Выберите услугу',wa:'WhatsApp',tg:'Telegram',note:'Мы ответим в течение 15 минут',fab:'Записаться',hi:'Здравствуйте! Хочу записаться на приём в Mega Dent.',mN:'Имя',mP:'Телефон',mD:'Врач',mS:'Услуга',mDt:'Дата',mC:'Комментарий',mAny:'Любой врач',mNone:'Не указано',bk:'Записаться'},
  kz:{title:'Қабылдауға жазылу',subtitle:'Форманы толтырыңыз, біз сізбен хабарласамыз',name:'Атыңыз',phone:'Телефон',doctor:'Дәрігер',service:'Қызмет',date:'Қалаған күні',comment:'Пікір',phN:'Сізге қалай хабарласуға болады',phP:'+7 (___) ___-__-__',phC:'Қосымша тілектер...',anyD:'Кез келген дәрігер',selS:'Қызметті таңдаңыз',wa:'WhatsApp',tg:'Telegram',note:'Біз 15 минут ішінде жауап береміз',fab:'Жазылу',hi:'Сәлеметсіз бе! Mega Dent-ке жазылғым келеді.',mN:'Аты',mP:'Телефон',mD:'Дәрігер',mS:'Қызмет',mDt:'Күні',mC:'Пікір',mAny:'Кез келген дәрігер',mNone:'Көрсетілмеген',bk:'Жазылу'}
};
const docs={ru:[{n:'Маммадова Г.М.',r:'Стоматолог-терапевт'},{n:'Юнусов А.Р.',r:'Детский стоматолог'},{n:'Толен М.Б.',r:'Хирург-имплантолог'},{n:'Аяган Н.С.',r:'Стоматолог-терапевт'},{n:'Ешмуханбетов Д.К.',r:'Стоматолог-ортопед'},{n:'Сейфуллин Е.А.',r:'Стоматолог-хирург'},{n:'Малгаждар А.Т.',r:'Стоматолог-гигиенист'},{n:'Жандосова У.Ж.',r:'Стоматолог-ортодонт'}],kz:[{n:'Маммадова Г.М.',r:'Стоматолог-терапевт'},{n:'Юнусов А.Р.',r:'Балалар стоматологы'},{n:'Толен М.Б.',r:'Хирург-имплантолог'},{n:'Аяган Н.С.',r:'Стоматолог-терапевт'},{n:'Ешмуханбетов Д.К.',r:'Стоматолог-ортопед'},{n:'Сейфуллин Е.А.',r:'Стоматолог-хирург'},{n:'Малгаждар А.Т.',r:'Стоматолог-гигиенист'},{n:'Жандосова У.Ж.',r:'Стоматолог-ортодонт'}]};
const svcs={ru:['Лечение зубов','Детская стоматология','Имплантация','Ортодонтия','Профессиональная гигиена','Протезирование'],kz:['Тіс емдеу','Балалар стоматологиясы','Имплантация','Ортодонтия','Кәсіби гигиена','Протездеу']};

/* ═══ TRANSLATION ENGINE ═══ */
function translatePage(toLang){
  const d = toLang==='kz' ? dict : dictR;
  const skip = new Set(['SCRIPT','STYLE','SVG','NOSCRIPT','IFRAME']);
  function walk(node){
    if(skip.has(node.tagName)) return;
    if(node.nodeType===3){const t=node.textContent.trim(); if(t&&d[t]) node.textContent=node.textContent.replace(t,d[t]); return;}
    if(node.nodeType===1){
      if(node.closest&&node.closest('svg')) return;
      const kids=node.querySelectorAll(':scope > *');
      if(kids.length===0&&node.childNodes.length<=1){const t=node.textContent.trim(); if(t&&d[t]){node.textContent=d[t]; return;}}
      if(node.innerHTML&&node.innerHTML.includes('<br')&&!node.querySelector('div,p,span,a,ul,li')){
        const lines=node.innerHTML.split(/<br\s*\/?>/);let ch=false;
        const nl=lines.map(l=>{const t=l.trim();if(t&&d[t]){ch=true;return d[t];}return l;});
        if(ch){node.innerHTML=nl.join('<br>');return;}
      }
      for(const c of node.childNodes) walk(c);
    }
  }
  walk(document.body);
}

let origHTML=null;
function switchLang(lang){
  if(lang===currentLang) return;
  if(lang==='ru'&&origHTML){
    const s=window.scrollY; document.body.innerHTML=origHTML; window.scrollTo(0,s); initUI(); currentLang='ru'; localStorage.setItem('megadent_lang','ru'); updateLB(); return;
  }
  currentLang=lang; localStorage.setItem('megadent_lang',lang);
  if(lang==='kz'){if(!origHTML) origHTML=document.body.innerHTML; translatePage('kz');}
  injectBM(); addDBB(); injectLS(); updateLB();
}
function updateLB(){document.querySelectorAll('.lang-btn').forEach(b=>{b.classList.toggle('active',b.textContent.trim().toLowerCase()===currentLang);});}

/* ═══ BOOKING MODAL ═══ */
function injectBM(){
  const t=bui[currentLang],dl=docs[currentLang],sl=svcs[currentLang];
  const dO=dl.map(d=>`<option value="${d.n} — ${d.r}">${d.n} — ${d.r}</option>`).join('');
  const sO=sl.map(s=>`<option value="${s}">${s}</option>`).join('');
  document.getElementById('bookingOverlay')?.remove();document.getElementById('bookingModal')?.remove();
  document.body.insertAdjacentHTML('beforeend',`<div class="booking-overlay" id="bookingOverlay" onclick="closeBooking()"></div><div class="booking-modal" id="bookingModal"><button class="booking-close" onclick="closeBooking()">✕</button><h3>${t.title}</h3><p class="booking-subtitle">${t.subtitle}</p><form class="booking-form" onsubmit="return false;"><div class="form-row"><div class="form-group"><label>${t.name}</label><input type="text" id="bkName" placeholder="${t.phN}" required></div><div class="form-group"><label>${t.phone}</label><input type="tel" id="bkPhone" placeholder="${t.phP}" required></div></div><div class="form-row"><div class="form-group"><label>${t.doctor}</label><select id="bkDoctor"><option value="">${t.anyD}</option>${dO}</select></div><div class="form-group"><label>${t.service}</label><select id="bkService"><option value="">${t.selS}</option>${sO}</select></div></div><div class="form-group"><label>${t.date}</label><input type="date" id="bkDate" min="${new Date().toISOString().split('T')[0]}"></div><div class="form-group"><label>${t.comment}</label><textarea id="bkComment" rows="2" placeholder="${t.phC}"></textarea></div><div class="booking-channels"><button type="button" class="channel-btn whatsapp" onclick="submitBooking('whatsapp')"><svg width="22" height="22" viewBox="0 0 24 24" fill="currentColor"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/></svg>${t.wa}</button><button type="button" class="channel-btn telegram" onclick="submitBooking('telegram')"><svg width="22" height="22" viewBox="0 0 24 24" fill="currentColor"><path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.479.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"/></svg>${t.tg}</button></div><p class="booking-note">${t.note}</p></form></div>`);
  let fab=document.getElementById('bookingFab');
  if(!fab){fab=document.createElement('button');fab.className='booking-fab';fab.id='bookingFab';fab.onclick=()=>openBooking();document.body.appendChild(fab);}
  fab.innerHTML=`<svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/></svg><span>${t.fab}</span>`;
}
function openBooking(dn){const o=document.getElementById('bookingOverlay'),m=document.getElementById('bookingModal');if(!o||!m)return;o.classList.add('open');m.classList.add('open');document.body.style.overflow='hidden';if(dn){const s=document.getElementById('bkDoctor');for(let i=0;i<s.options.length;i++)if(s.options[i].value.includes(dn)){s.selectedIndex=i;break;}}}
function closeBooking(){document.getElementById('bookingOverlay')?.classList.remove('open');document.getElementById('bookingModal')?.classList.remove('open');document.body.style.overflow='';}
function submitBooking(ch){const t=bui[currentLang],n=document.getElementById('bkName').value.trim(),p=document.getElementById('bkPhone').value.trim(),d=document.getElementById('bkDoctor').value||t.mAny,s=document.getElementById('bkService').value||t.mNone,dt=document.getElementById('bkDate').value||t.mNone,c=document.getElementById('bkComment').value.trim();if(!n||!p){if(!n)document.getElementById('bkName').style.borderColor='#e74c3c';if(!p)document.getElementById('bkPhone').style.borderColor='#e74c3c';setTimeout(()=>{document.getElementById('bkName').style.borderColor='';document.getElementById('bkPhone').style.borderColor='';},2e3);return;}let m=`${t.hi}\n\n${t.mN}: ${n}\n${t.mP}: ${p}\n${t.mD}: ${d}\n${t.mS}: ${s}\n${t.mDt}: ${dt}`;if(c)m+=`\n${t.mC}: ${c}`;if(ch==='whatsapp')window.open(`https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(m)}`,'_blank');else window.open(`${TELEGRAM_BOT}?start=booking`,'_blank');closeBooking();}

/* ═══ LANG SWITCHER ═══ */
function injectLS(){
  const nav=document.querySelector('.nav-links');
  if(nav&&!nav.querySelector('.lang-switch')){const li=document.createElement('li');li.innerHTML=`<div class="lang-switch"><button class="lang-btn ${currentLang==='ru'?'active':''}" onclick="switchLang('ru')">RU</button><button class="lang-btn ${currentLang==='kz'?'active':''}" onclick="switchLang('kz')">KZ</button></div>`;const last=nav.querySelector('li:last-child');nav.insertBefore(li,last);}
  const mob=document.getElementById('mobileMenu');
  if(mob&&!mob.querySelector('.lang-switch')){const d=document.createElement('div');d.style.cssText='display:flex;justify-content:center;margin-top:16px;';d.innerHTML=`<div class="lang-switch" style="background:rgba(255,255,255,0.1);"><button class="lang-btn ${currentLang==='ru'?'active':''}" onclick="switchLang('ru')">RU</button><button class="lang-btn ${currentLang==='kz'?'active':''}" onclick="switchLang('kz')">KZ</button></div>`;mob.appendChild(d);}
}

/* ═══ DOCTOR BOOK BUTTONS ═══ */
function addDBB(){const t=bui[currentLang];document.querySelectorAll('.doctor-card').forEach(c=>{if(c.querySelector('.btn-book'))return;const ne=c.querySelector('.doctor-name');if(!ne)return;const nm=ne.textContent.trim();const b=document.createElement('button');b.className='btn-book';b.onclick=()=>openBooking(nm);b.innerHTML=`<svg width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/></svg><span>${t.bk}</span>`;c.querySelector('.doctor-info')?.appendChild(b);});}

/* ═══ INIT ═══ */
function initUI(){
  const h=document.getElementById('header');if(h)window.addEventListener('scroll',()=>{h.classList.toggle('scrolled',window.scrollY>20);});
  const rv=document.querySelectorAll('.reveal');const ob=new IntersectionObserver((en)=>{en.forEach((e,i)=>{if(e.isIntersecting){setTimeout(()=>e.target.classList.add('visible'),i*80);ob.unobserve(e.target);}});},{threshold:0.15,rootMargin:'0px 0px -40px 0px'});rv.forEach(el=>ob.observe(el));
  window.toggleMenu=function(){document.getElementById('mobileMenu')?.classList.toggle('open');};
  document.addEventListener('keydown',e=>{if(e.key==='Escape')closeBooking();});
  injectLS();injectBM();addDBB();
}
document.addEventListener('DOMContentLoaded',function(){
  origHTML=document.body.innerHTML;initUI();
  if(currentLang==='kz'){translatePage('kz');injectBM();addDBB();injectLS();updateLB();}
});
